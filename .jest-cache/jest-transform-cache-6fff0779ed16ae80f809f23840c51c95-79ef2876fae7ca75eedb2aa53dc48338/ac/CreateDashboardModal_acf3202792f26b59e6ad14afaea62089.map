{"version":3,"sources":["/Users/zweigen/Sites/daten-see-v2/src/components/dashboard/CreateDashboardModal.tsx"],"sourcesContent":["'use client';\n\nimport { X } from 'lucide-react';\nimport { useState } from 'react';\n\nimport type { CreateDashboardRequest } from '@/types/dashboard.types';\n\ninterface CreateDashboardModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (data: CreateDashboardRequest) => Promise<string>;\n  isLoading: boolean;\n}\n\nexport function CreateDashboardModal({ \n  isOpen, \n  onClose, \n  onSubmit, \n  isLoading \n}: CreateDashboardModalProps): React.ReactElement | null {\n  const [formData, setFormData] = useState<CreateDashboardRequest>({\n    name: '',\n    description: '',\n    isPublic: false\n  });\n  const [errors, setErrors] = useState<Partial<CreateDashboardRequest>>({});\n\n  const validateForm = (): boolean => {\n    const newErrors: Partial<CreateDashboardRequest> = {};\n\n    if (!formData.name.trim()) {\n      newErrors.name = 'Name ist erforderlich';\n    } else if (formData.name.length < 3) {\n      newErrors.name = 'Name muss mindestens 3 Zeichen lang sein';\n    }\n\n    if (!formData.description.trim()) {\n      newErrors.description = 'Beschreibung ist erforderlich';\n    } else if (formData.description.length < 10) {\n      newErrors.description = 'Beschreibung muss mindestens 10 Zeichen lang sein';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent): Promise<void> => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      await onSubmit(formData);\n      // Reset form on success\n      setFormData({ name: '', description: '', isPublic: false });\n      setErrors({});\n      onClose();\n    } catch {\n      // Error handling is done in the parent component\n    }\n  };\n\n  const handleClose = (): void => {\n    setFormData({ name: '', description: '', isPublic: false });\n    setErrors({});\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div className=\"fixed inset-0 bg-black/50 z-40\" onClick={handleClose} />\n      \n      {/* Modal */}\n      <div className=\"fixed inset-0 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-lg shadow-xl w-full max-w-md\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">\n              Neues Dashboard erstellen\n            </h2>\n            <button\n              type=\"button\"\n              onClick={handleClose}\n              className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n              aria-label=\"Close modal\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n            {/* Name Field */}\n            <div>\n              <label htmlFor=\"dashboard-name\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Dashboard Name\n              </label>\n              <input\n                id=\"dashboard-name\"\n                type=\"text\"\n                value={formData.name}\n                onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\n                  errors.name ? 'border-red-300' : 'border-gray-300'\n                }`}\n                placeholder=\"z.B. Sales Analytics\"\n                disabled={isLoading}\n              />\n              {errors.name && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.name}</p>\n              )}\n            </div>\n\n            {/* Description Field */}\n            <div>\n              <label htmlFor=\"dashboard-description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Beschreibung\n              </label>\n              <textarea\n                id=\"dashboard-description\"\n                value={formData.description}\n                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                rows={3}\n                className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none transition-colors ${\n                  errors.description ? 'border-red-300' : 'border-gray-300'\n                }`}\n                placeholder=\"Beschreibe das Dashboard und seinen Zweck...\"\n                disabled={isLoading}\n              />\n              {errors.description && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>\n              )}\n            </div>\n\n            {/* Public/Private Toggle */}\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"isPublic\"\n                checked={formData.isPublic}\n                onChange={(e) => setFormData(prev => ({ ...prev, isPublic: e.target.checked }))}\n                className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                disabled={isLoading}\n              />\n              <label htmlFor=\"isPublic\" className=\"ml-2 text-sm text-gray-700\">\n                Dashboard Ã¶ffentlich machen\n              </label>\n            </div>\n          </form>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200\">\n            <button\n              type=\"button\"\n              onClick={handleClose}\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n              disabled={isLoading}\n            >\n              Abbrechen\n            </button>\n            <button\n              type=\"submit\"\n              onClick={handleSubmit}\n              disabled={isLoading}\n              className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? 'Erstelle...' : 'Dashboard erstellen'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}"],"names":["CreateDashboardModal","isOpen","onClose","onSubmit","isLoading","formData","setFormData","useState","name","description","isPublic","errors","setErrors","validateForm","newErrors","trim","length","Object","keys","handleSubmit","e","preventDefault","handleClose","div","className","onClick","h2","button","type","aria-label","X","form","label","htmlFor","input","id","value","onChange","prev","target","placeholder","disabled","p","textarea","rows","checked"],"mappings":"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"}