{"version":3,"names":["register","cov_123dv79uit","f","devLogger","s","Promise","resolve","then","_interop_require_wildcard","require","process","env","NEXT_RUNTIME","b","configureSentryPerformance","sentryInit","init","dsn","SENTRY_DSN","tracesSampleRate","NODE_ENV","debug","environment","release","npm_package_version","beforeSend","event","contexts","runtime","name","version","integrations","initialScope","tags","component","maxBreadcrumbs","attachStacktrace","sendDefaultPii","autoSessionTracking"],"sources":["/Users/zweigen/Sites/daten-see-v2/src/instrumentation.ts"],"sourcesContent":["// Next.js Instrumentation Hook (Official Pattern)\n// https://nextjs.org/docs/app/building-your-application/optimizing/instrumentation\n\nexport async function register(): Promise<void> {\n  const { devLogger } = await import('./lib/monitoring/development-logger');\n  // Server-side Sentry initialization\n  if (process.env.NEXT_RUNTIME === 'nodejs') {\n    // Import minimal Sentry configuration for Docker compatibility\n    await import('../sentry.minimal.config.js');\n    \n    // Initialize performance monitoring for server\n    const { configureSentryPerformance } = await import('./lib/performance/sentry-integration');\n    configureSentryPerformance();\n    \n    // Server-side logging\n    devLogger.sentryInit('server', true);\n  }\n  \n  // Edge runtime initialization (if needed)\n  if (process.env.NEXT_RUNTIME === 'edge') {\n    const { init } = await import('@sentry/nextjs');\n    \n    init({\n      dsn: process.env.SENTRY_DSN || '',\n      \n      // Performance Monitoring - Conservative for edge\n      tracesSampleRate: process.env.NODE_ENV === 'production' ? 0.05 : 0.5,\n      \n      // Edge-specific settings\n      debug: false,\n      environment: process.env.NODE_ENV,\n      release: process.env.npm_package_version || '0.1.0',\n      \n      // Edge runtime context\n      beforeSend(event) {\n        event.contexts = {\n          ...event.contexts,\n          runtime: {\n            name: 'edge',\n            version: process.env.npm_package_version || '0.1.0',\n            environment: process.env.NODE_ENV,\n          },\n        };\n        \n        return event;\n      },\n      \n      // Minimal integrations for edge\n      integrations: [\n        // Only essential integrations for edge runtime\n      ],\n      \n      // Tags for filtering\n      initialScope: {\n        tags: {\n          component: 'edge',\n          runtime: 'edge',\n          version: process.env.npm_package_version || '0.1.0',\n        },\n      },\n      \n      // Edge-specific settings\n      maxBreadcrumbs: 20,\n      attachStacktrace: true,\n      sendDefaultPii: false,\n      autoSessionTracking: false,\n    });\n    \n    // Edge runtime logging\n    devLogger.sentryInit('edge', true);\n  }\n}"],"mappings":"AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}