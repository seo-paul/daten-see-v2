{"version":3,"sources":["/Users/zweigen/Sites/daten-see-v2/src/components/auth/LoginForm.tsx"],"sourcesContent":["'use client';\n\nimport { Eye, EyeOff, LogIn } from 'lucide-react';\nimport { useState } from 'react';\n\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useMockLoginMutation } from '@/hooks/auth/useAuthMutations';\n\ninterface LoginFormProps {\n  onSuccess?: () => void;\n  className?: string;\n}\n\n/**\n * Login Form Component\n * Demonstrates authentication with Context + TanStack Query\n */\nexport function LoginForm({ onSuccess, className = '' }: LoginFormProps): React.ReactElement {\n  const { error: authError, clearError } = useAuth();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  });\n  const [showPassword, setShowPassword] = useState(false);\n\n  // Use mock login mutation for development\n  const loginMutation = useMockLoginMutation();\n\n  const handleSubmit = async (e: React.FormEvent): Promise<void> => {\n    e.preventDefault();\n    \n    // Clear any existing errors\n    clearError();\n\n    if (!formData.email || !formData.password) {\n      return;\n    }\n\n    try {\n      await loginMutation.mutateAsync({\n        email: formData.email,\n        password: formData.password,\n      });\n\n      // Call success callback\n      onSuccess?.();\n    } catch {\n      // Error is already handled by the mutation's onError\n      // Silently handle as error is already logged\n    }\n  };\n\n  const handleInputChange = (field: 'email' | 'password') => \n    (e: React.ChangeEvent<HTMLInputElement>): void => {\n      setFormData(prev => ({\n        ...prev,\n        [field]: e.target.value,\n      }));\n    };\n\n  const isLoading = loginMutation.isPending;\n  const error = authError || (loginMutation.error ? loginMutation.error.message : null);\n\n  return (\n    <div className={`max-w-md mx-auto px-4 sm:px-0 ${className}`}>\n      <div className=\"bg-[#FDF9F3] rounded-lg shadow-md p-4 sm:p-6\">\n        <div className=\"text-center mb-6\">\n          <LogIn className=\"mx-auto h-10 w-10 sm:h-12 sm:w-12 text-[#2F4F73] mb-3\" />\n          <h2 className=\"text-xl sm:text-2xl font-bold text-[#3d3d3d]\">Anmeldung</h2>\n          <p className=\"text-sm sm:text-base text-[#3d3d3d]/70 mt-2\">Zugriff auf Ihr Dashboard</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {/* Email Field */}\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-[#3d3d3d] mb-1\">\n              E-Mail\n            </label>\n            <input\n              id=\"email\"\n              type=\"email\"\n              required\n              value={formData.email}\n              onChange={handleInputChange('email')}\n              disabled={isLoading}\n              className=\"w-full px-3 py-2.5 sm:py-2 text-base sm:text-sm border border-[#E6D7B8] rounded-md shadow-sm placeholder-[#3d3d3d]/50 focus:outline-none focus:ring-[#2F4F73] focus:border-[#2F4F73] disabled:bg-[#F6F0E0] disabled:cursor-not-allowed\"\n              placeholder=\"Ihre E-Mail eingeben\"\n            />\n          </div>\n\n          {/* Password Field */}\n          <div>\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-[#3d3d3d] mb-1\">\n              Passwort\n            </label>\n            <div className=\"relative\">\n              <input\n                id=\"password\"\n                type={showPassword ? 'text' : 'password'}\n                required\n                value={formData.password}\n                onChange={handleInputChange('password')}\n                disabled={isLoading}\n                className=\"w-full px-3 py-2.5 sm:py-2 pr-10 text-base sm:text-sm border border-[#E6D7B8] rounded-md shadow-sm placeholder-[#3d3d3d]/50 focus:outline-none focus:ring-[#2F4F73] focus:border-[#2F4F73] disabled:bg-[#F6F0E0] disabled:cursor-not-allowed\"\n                placeholder=\"Ihr Passwort eingeben\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(!showPassword)}\n                disabled={isLoading}\n                className=\"absolute inset-y-0 right-0 pr-3 flex items-center disabled:cursor-not-allowed\"\n              >\n                {showPassword ? (\n                  <EyeOff className=\"h-4 w-4 text-[#3d3d3d]/50\" />\n                ) : (\n                  <Eye className=\"h-4 w-4 text-[#3d3d3d]/50\" />\n                )}\n              </button>\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-md p-3\">\n              <p className=\"text-sm text-red-600\">{error}</p>\n            </div>\n          )}\n\n          {/* Submit Button */}\n          <button\n            type=\"submit\"\n            disabled={isLoading || !formData.email || !formData.password}\n            className=\"w-full flex justify-center py-3 sm:py-2 px-4 border border-transparent rounded-md shadow-sm text-base sm:text-sm font-medium text-white bg-[#2F4F73] hover:bg-[#365C83] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2F4F73] disabled:bg-[#3d3d3d]/40 disabled:cursor-not-allowed touch-manipulation\"\n          >\n            {isLoading ? (\n              <span className=\"flex items-center\">\n                <svg className=\"animate-spin -ml-1 mr-3 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Anmeldung l√§uft...\n              </span>\n            ) : (\n              'Anmelden'\n            )}\n          </button>\n        </form>\n\n        {/* Development Note */}\n        {process.env.NODE_ENV === 'development' && (\n          <div className=\"mt-6 p-3 bg-[#FBF5ED] border border-[#E6D7B8] rounded-md\">\n            <p className=\"text-xs sm:text-xs leading-relaxed text-[#2F4F73]\">\n              <strong>Development Mode:</strong> Any email/password will work. \n              Use &quot;error@test.com&quot; to test error handling.\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":["LoginForm","onSuccess","className","error","authError","clearError","useAuth","formData","setFormData","useState","email","password","showPassword","setShowPassword","loginMutation","useMockLoginMutation","handleSubmit","e","preventDefault","mutateAsync","handleInputChange","field","prev","target","value","isLoading","isPending","message","div","LogIn","h2","p","form","onSubmit","label","htmlFor","input","id","type","required","onChange","disabled","placeholder","button","onClick","EyeOff","Eye","span","svg","xmlns","fill","viewBox","circle","cx","cy","r","stroke","strokeWidth","path","d","process","env","NODE_ENV","strong"],"mappings":"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"}