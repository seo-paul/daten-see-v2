{"version":3,"names":["GlobalError","error","reset","cov_7rylampvp","f","s","_react","useEffect","_loggerconfig","appLogger","component","metadata","digest","stack","timestamp","Date","now","_nextjs","withScope","scope","setTag","setLevel","setContext","componentStack","errorBoundaryLevel","captureException","handleReload","info","action","resetError","warn","Error","b","String","window","location","reload","_jsxruntime","jsx","lang","className","jsxs","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","process","env","NODE_ENV","message","onClick","open","slice"],"sources":["/Users/zweigen/Sites/daten-see-v2/src/app/global-error.tsx"],"sourcesContent":["'use client';\n\n// Global Error Handler for Next.js App Router\n// Official Sentry Pattern: https://docs.sentry.io/platforms/javascript/guides/nextjs/manual-setup/#react-render-errors-in-app-router\n\nimport * as Sentry from '@sentry/nextjs';\nimport React, { useEffect } from 'react';\n\nimport { appLogger } from '@/lib/monitoring/logger.config';\n\ninterface GlobalErrorProps {\n  error: Error & { digest?: string };\n  reset: () => void;\n}\n\nexport default function GlobalError({ error, reset }: GlobalErrorProps): React.ReactElement {\n  useEffect(() => {\n    // Log to our structured logging system\n    appLogger.error('Global Error Handler triggered', {\n      error,\n      component: 'global-error-handler',\n      metadata: {\n        digest: error.digest,\n        stack: error.stack,\n        timestamp: Date.now(),\n      },\n    });\n\n    // Report to Sentry with full context\n    Sentry.withScope((scope) => {\n      scope.setTag('errorBoundary', 'global');\n      scope.setLevel('fatal');\n      scope.setContext('errorDetails', {\n        digest: error.digest,\n        componentStack: 'global-level',\n        errorBoundaryLevel: 'global',\n      });\n      \n      Sentry.captureException(error);\n    });\n  }, [error]);\n\n  const handleReload = (): void => {\n    appLogger.info('Global error recovery - page reload', {\n      action: 'global-error-reload',\n      component: 'global-error-handler',\n    });\n    \n    // Try to reset first, then reload if that fails\n    try {\n      reset();\n    } catch (resetError) {\n      appLogger.warn('Reset failed, forcing page reload', {\n        error: resetError instanceof Error ? resetError : new Error(String(resetError)),\n        component: 'global-error-handler',\n      });\n      window.location.reload();\n    }\n  };\n\n  return (\n    <html lang=\"en\">\n      <body>\n        <div className=\"min-h-screen flex items-center justify-center bg-red-50 px-4\">\n          <div className=\"max-w-md w-full bg-[#FDF9F3] shadow-lg rounded-lg p-6\">\n            <div className=\"flex items-center mb-4\">\n              <div className=\"flex-shrink-0\">\n                <svg\n                  className=\"w-8 h-8 text-red-500\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\n                  />\n                </svg>\n              </div>\n              <div className=\"ml-3\">\n                <h1 className=\"text-lg font-semibold text-red-800\">\n                  Application Error\n                </h1>\n              </div>\n            </div>\n\n            <div className=\"mb-6\">\n              <p className=\"text-sm text-red-700 mb-2\">\n                The application encountered a critical error and needs to be restarted.\n              </p>\n              \n              {process.env.NODE_ENV === 'development' && (\n                <details className=\"mt-3\">\n                  <summary className=\"cursor-pointer text-sm font-medium text-red-800\">\n                    Development Error Details\n                  </summary>\n                  <div className=\"mt-2 p-3 bg-red-100 rounded text-xs font-mono\">\n                    <div className=\"mb-2\">\n                      <strong>Error:</strong> {error.message}\n                    </div>\n                    {error.digest && (\n                      <div className=\"mb-2\">\n                        <strong>Digest:</strong> {error.digest}\n                      </div>\n                    )}\n                    {error.stack && (\n                      <div>\n                        <strong>Stack:</strong>\n                        <pre className=\"mt-1 whitespace-pre-wrap text-xs\">\n                          {error.stack}\n                        </pre>\n                      </div>\n                    )}\n                  </div>\n                </details>\n              )}\n            </div>\n\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={handleReload}\n                className=\"flex-1 bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors\"\n              >\n                Restart Application\n              </button>\n              \n              {process.env.NODE_ENV === 'production' && (\n                <button\n                  onClick={() => {\n                    window.open(\n                      'mailto:support@daten-see.com?subject=Critical Application Error&body=A critical error occurred in the application. Please investigate.',\n                      '_blank'\n                    );\n                  }}\n                  className=\"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors\"\n                >\n                  Report Issue\n                </button>\n              )}\n            </div>\n            \n            <div className=\"mt-4 text-center\">\n              <p className=\"text-xs text-[#5d5d5d]\">\n                Error ID: {error.digest?.slice(0, 8) || 'unknown'}\n              </p>\n            </div>\n          </div>\n        </div>\n      </body>\n    </html>\n  );\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}