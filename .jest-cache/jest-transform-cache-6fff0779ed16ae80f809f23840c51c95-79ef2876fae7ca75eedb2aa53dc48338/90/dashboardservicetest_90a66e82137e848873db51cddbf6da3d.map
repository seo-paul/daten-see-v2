{"version":3,"sources":["/Users/zweigen/Sites/daten-see-v2/src/lib/api/__tests__/dashboard.service.test.ts"],"sourcesContent":["import type { Dashboard, CreateDashboardRequest, UpdateDashboardRequest } from '@/types/dashboard.types';\n\nimport { DashboardService } from '../dashboard';\nimport { apiClient } from '../index';\n\n// Mock the API client\njest.mock('../index', () => ({\n  apiClient: {\n    get: jest.fn(),\n    post: jest.fn(),\n    put: jest.fn(),\n    delete: jest.fn(),\n    getPaginated: jest.fn(),\n  },\n}));\n\nconst mockApiClient = apiClient as jest.Mocked<typeof apiClient>;\n\ndescribe('DashboardService', () => {\n  const mockDashboard: Dashboard = {\n    id: '1',\n    name: 'Test Dashboard',\n    description: 'Test description',\n    isPublic: false,\n    createdAt: new Date('2024-01-01T00:00:00Z'),\n    updatedAt: new Date('2024-01-01T00:00:00Z'),\n    widgets: [],\n    settings: {\n      backgroundColor: '#ffffff',\n      gridSize: 12,\n      autoRefresh: false,\n      refreshInterval: 300,\n    },\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('getDashboards', () => {\n    it('should return dashboards array', async () => {\n      const mockResponse = {\n        data: [mockDashboard],\n        success: true,\n      };\n      mockApiClient.get.mockResolvedValue(mockResponse);\n\n      const result = await DashboardService.getDashboards();\n\n      expect(result).toEqual([mockDashboard]);\n      expect(mockApiClient.get).toHaveBeenCalledWith('/dashboards');\n    });\n  });\n\n  describe('createDashboard', () => {\n    it('should create dashboard successfully', async () => {\n      const createRequest: CreateDashboardRequest = {\n        name: 'New Dashboard',\n        description: 'New description',\n        isPublic: false,\n      };\n      const mockResponse = {\n        data: mockDashboard,\n        success: true,\n      };\n      mockApiClient.post.mockResolvedValue(mockResponse);\n\n      const result = await DashboardService.createDashboard(createRequest);\n\n      expect(result).toEqual(mockDashboard);\n      expect(mockApiClient.post).toHaveBeenCalledWith('/dashboards', createRequest);\n    });\n  });\n\n  describe('updateDashboard', () => {\n    it('should update dashboard successfully', async () => {\n      const updateRequest: UpdateDashboardRequest = {\n        id: '1',\n        name: 'Updated Dashboard',\n        description: 'Updated description',\n        isPublic: true,\n      };\n      const updatedDashboard = { ...mockDashboard, ...updateRequest };\n      const mockResponse = {\n        data: updatedDashboard,\n        success: true,\n      };\n      mockApiClient.put.mockResolvedValue(mockResponse);\n\n      const result = await DashboardService.updateDashboard('1', updateRequest);\n\n      expect(result).toEqual(updatedDashboard);\n      expect(mockApiClient.put).toHaveBeenCalledWith('/dashboards/1', updateRequest);\n    });\n  });\n\n  describe('deleteDashboard', () => {\n    it('should delete dashboard successfully', async () => {\n      const mockResponse = {\n        data: undefined,\n        success: true,\n      };\n      mockApiClient.delete.mockResolvedValue(mockResponse);\n\n      await DashboardService.deleteDashboard('1');\n\n      expect(mockApiClient.delete).toHaveBeenCalledWith('/dashboards/1');\n    });\n  });\n\n  describe('getDashboard', () => {\n    it('should return single dashboard', async () => {\n      const mockResponse = {\n        data: mockDashboard,\n        success: true,\n      };\n      mockApiClient.get.mockResolvedValue(mockResponse);\n\n      const result = await DashboardService.getDashboard('1');\n\n      expect(result).toEqual(mockDashboard);\n      expect(mockApiClient.get).toHaveBeenCalledWith('/dashboards/1');\n    });\n  });\n\n  describe('error handling', () => {\n    it('should handle network errors', async () => {\n      mockApiClient.get.mockRejectedValue(new Error('Network error'));\n\n      await expect(DashboardService.getDashboard('1')).rejects.toThrow('Network error');\n    });\n  });\n});"],"names":["jest","mock","apiClient","get","fn","post","put","delete","getPaginated","mockApiClient","describe","mockDashboard","id","name","description","isPublic","createdAt","Date","updatedAt","widgets","settings","backgroundColor","gridSize","autoRefresh","refreshInterval","beforeEach","clearAllMocks","it","mockResponse","data","success","mockResolvedValue","result","DashboardService","getDashboards","expect","toEqual","toHaveBeenCalledWith","createRequest","createDashboard","updateRequest","updatedDashboard","updateDashboard","undefined","deleteDashboard","getDashboard","mockRejectedValue","Error","rejects","toThrow"],"mappings":"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"}