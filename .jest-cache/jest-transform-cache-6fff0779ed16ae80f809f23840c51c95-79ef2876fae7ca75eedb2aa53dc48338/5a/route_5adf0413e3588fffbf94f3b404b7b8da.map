{"version":3,"names":["GET","cov_13inb4puli","f","s","POST","execAsync","_util","promisify","_child_process","exec","console","log","stdout","stderr","cwd","process","timeout","b","warn","split","slice","join","_server","NextResponse","json","success","message","timestamp","Date","toISOString","output","error","Error","status"],"sources":["/Users/zweigen/Sites/daten-see-v2/src/app/api/collect-metrics/route.ts"],"sourcesContent":["import { exec } from 'child_process';\nimport { promisify } from 'util';\n\nimport { NextResponse } from 'next/server';\n\nconst execAsync = promisify(exec);\n\n/**\n * API Endpoint: Trigger Metrics Collection\n * Executes the collect-real-metrics.sh script and returns updated metrics\n */\nexport async function POST(): Promise<NextResponse> {\n  try {\n    // eslint-disable-next-line no-console\n    console.log('üîÑ Manual metrics collection triggered from dashboard');\n    \n    // Execute the metrics collection script\n    const { stdout, stderr } = await execAsync('./scripts/collect-real-metrics.sh', {\n      cwd: process.cwd(),\n      timeout: 30000, // 30 second timeout\n    });\n    \n    if (stderr) {\n      // eslint-disable-next-line no-console\n      console.warn('‚ö†Ô∏è Script stderr:', stderr);\n    }\n    \n    // eslint-disable-next-line no-console\n    console.log('‚úÖ Metrics collection completed:', stdout.split('\\n').slice(-6).join('\\n'));\n    \n    return NextResponse.json({\n      success: true,\n      message: 'Metrics collection completed successfully',\n      timestamp: new Date().toISOString(),\n      output: stdout.split('\\n').slice(-6), // Last 6 lines of output\n    });\n    \n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error('‚ùå Failed to collect metrics:', error);\n    \n    return NextResponse.json({\n      success: false,\n      message: 'Failed to collect metrics',\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: new Date().toISOString(),\n    }, {\n      status: 500\n    });\n  }\n}\n\n/**\n * Handle unsupported methods\n */\nexport async function GET(): Promise<NextResponse> {\n  return NextResponse.json({\n    message: 'Method not allowed. Use POST to trigger metrics collection.',\n  }, {\n    status: 405\n  });\n}"],"mappings":"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","ignoreList":[]}